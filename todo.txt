SALJA Evolution Map — Audit-Driven Improvements
Philosophy: File-based calendar conversion CLI for power users and developers. Data fidelity configurable. Interactive-first.
================================================================================

--- PHASE: PARSER TEST SUITES ---

(B) Write tests for internal/parsers/ticktick.go covering: basic task with all fields, checklist subtasks, priority mapping (0/1/3/5), repeat rules, empty fields, malformed CSV row +feature
(B) Write tests for internal/parsers/todoist.go covering: flat task, indent-based subtask hierarchy (INDENT 1/2/3), priority inversion (4=highest), date with timezone, labels column +feature
(B) Write tests for internal/parsers/gcal.go covering: all-day event, timed event with timezone, multi-day event, event with location and description, missing optional columns +feature
(B) Write tests for internal/parsers/outlook.go covering: event with 12-hour time format, event with 24-hour time, recurring event fields, categories mapping +feature
(B) Write tests for internal/parsers/notion.go covering: task with all columns, configurable column mapping, missing columns graceful handling, date-only vs datetime +feature
(B) Write tests for internal/parsers/trello.go covering: card with checklist items, card with labels, card with due date, archived cards, board with multiple lists +feature
(B) Write tests for internal/parsers/asana.go covering: task with assignee and section, completed task, subtask rows, tags column, date formats +feature
(B) Write tests for internal/parsers/omnifocus.go covering: nested project/task hierarchy via indentation, @tags parsing, due/defer dates, notes blocks +feature
(B) Write tests for internal/writers/ticktick.go covering: roundtrip from parse-then-write produces valid CSV, subtask serialization, priority mapping back to 0/1/3/5 +feature
(B) Write tests for internal/writers/todoist.go covering: roundtrip, indent-based hierarchy reconstruction, priority inversion back to 1-4 scale +feature
(B) Write tests for internal/writers/gcal.go covering: roundtrip, all-day event date format, location and description preservation +feature
(B) Write tests for internal/writers/trello.go covering: roundtrip, checklist generation from subtasks, label serialization, JSON structure validity +feature

--- PHASE: MODEL ENHANCEMENTS ---

(B) Add a Validate() error method to model.CalendarItem in internal/model/types.go that checks: Title not empty, Priority in 0-5 range, StartTime before EndTime when both set, ItemType is valid +feature
(B) Add helper methods to model.CalendarItem: IsCompleted() bool, HasRecurrence() bool, HasSubtasks() bool, Duration() time.Duration +feature
(B) Add CreatedAt and UpdatedAt time.Time fields to model.CalendarItem for sync tracking and conflict resolution timestamp comparison +feature
(B) Add a Timezone string field to model.CalendarItem and populate it from ICS TZID, API timezone fields, and config default_timezone +feature

--- PHASE: CONFIG HARDENING ---

(B) Add timezone validation in internal/config/config.go validate() that checks default_timezone against time.LoadLocation to verify it is a valid IANA timezone name +feature
(B) Add API config validation in internal/config/config.go to warn when a service section has client_id set but client_secret is empty +feature
(B) Add config option conflict_thresholds with sub-fields levenshtein_threshold, min_title_length, date_proximity_hours for tuning conflict detection sensitivity +feature

--- PHASE: CHARSET & DATE ROBUSTNESS ---

(B) Add Windows-1252 (CP1252) encoding detection and transcoding support to internal/errors/charset.go as a fallback before Latin-1 since CP1252 is more common in Windows-exported CSVs +feature
(B) Integrate TranscodeToUTF8 from internal/errors/charset.go into all CSV parser Parse() methods so charset detection happens automatically on file open +feature
(B) Integrate AmbiguousDateParser from internal/errors/dateparse.go into CSV parsers that handle date fields so locale-aware date interpretation is used instead of hardcoded format strings +feature

--- PHASE: STREAMING & SCALE ---

(B) Add a Close() method to StreamingCSVParser and StreamingICSParser in internal/errors/streaming.go for proper resource cleanup +refactor
(B) Integrate StreamingCSVParser into CSV parsers as an optional mode triggered when file size exceeds a configurable threshold (default 10MB) in config +feature
(B) Refactor internal/conflict/detector.go to use sorted-merge or hash-based matching when item count exceeds 1000 to avoid O(n²) degradation +refactor

--- PHASE: PROGRESS & UX ---

(B) Fix the progress bar bug in cmd/salja/commands/convert.go where the bar loop increments without doing actual work — move progress updates to wrap individual item conversion within WriteOutput +refactor
(B) Add item-count summary to all commands that process files: show "Converted N events, M tasks (K warnings)" at the end of convert, validate, and diff +feature
(B) Add a --format flag to the diff command in cmd/salja/commands/diff.go that supports "table" (default), "json", and "patch" output styles +feature

--- PHASE: BUILD QUALITY ---

(B) Fix Go version mismatch: update .github/workflows/ci.yml to use the same Go version specified in go.mod instead of hardcoded 1.22 +infra
(B) Add golangci-lint to .github/workflows/ci.yml lint job instead of only running go vet, using the golangci/golangci-lint-action GitHub Action +infra
(B) Add go test -race flag to the test job in .github/workflows/ci.yml to catch data races in conflict resolver and token store +infra
(B) Add test coverage reporting to .github/workflows/ci.yml using go test -coverprofile and upload as a GitHub Actions artifact +infra
(B) Add a make lint target to Makefile that fails the build if golangci-lint is installed and reports errors, instead of silently skipping +infra
